<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>æµã‚Œã‚‹ã‚ˆã†ãªã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹</title>
  <meta name="description" content="http://www.martinfowler.com/bliki/FluentInterface.html">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://bliki-ja.github.io/FluentInterface">
  <link rel="alternate" type="application/rss+xml" title="Martin Fowler's Bliki (ja)" href="http://bliki-ja.github.io/feed.xml" />
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Martin Fowler's Bliki (ja)</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">æµã‚Œã‚‹ã‚ˆã†ãªã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹</h1>
    <p class="post-meta">Dec 20, 2005</p>
  </header>

  <article class="post-content">
    <p><a href="http://www.martinfowler.com/bliki/FluentInterface.html">http://www.martinfowler.com/bliki/FluentInterface.html</a></p>

<p>2005/12/20</p>

<p>//A few months ago I attended a workshop with Eric Evans, and he talked about a certain style of interface which we decided to name a fluent interface. It&#39;s not a common style, but one we think should be better known. Probably the best way to describe it is by example.</p>

<p>æ•°ãƒ¶æœˆå‰ã€[[Eric Evans|<a href="http://domainlanguage.com/about/ericevans.html%5D%5D%E3%81%A8%E4%B8%80%E7%B7%92%E3%81%AB%E3%81%82%E3%82%8B%E3%83%AF%E3%83%BC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%83%E3%83%97%E3%81%AB%E5%8F%82%E5%8A">http://domainlanguage.com/about/ericevans.html]]ã¨ä¸€ç·’ã«ã‚ã‚‹ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã«å‚åŠ</a> ã—ãŸã€‚
ãã“ã§å½¼ãŒã¨ã‚ã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®ã‚¹ã‚¿ã‚¤ãƒ«ã«ã¤ã„ã¦èªã£ãŸã®ã ãŒã€
æˆ‘ã€…ã¯ãã‚Œã‚’ã€Œæµã‚Œã‚‹ã‚ˆã†ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆfluent interfaceï¼‰ã€ã¨åã¥ã‘ã‚‹ã“ã¨ã«ã—ãŸã€‚
ä¸€èˆ¬çš„ãªã‚¹ã‚¿ã‚¤ãƒ«ã§ã¯ãªã„ãŒã€ã‚‚ã£ã¨è©•ä¾¡ã•ã‚Œã‚‹ã¹ãä»£ç‰©ã ã€‚
ãŠãã‚‰ãä¾‹ã‚’ç¤ºã—ãŸã»ã†ãŒã„ã„ã ã‚ã†ã‹ã‚‰ã€ãã†ã—ã¦ã¿ã‚‹ã“ã¨ã«ã™ã‚‹ã€‚</p>

<p>//The simplest example is probably from Eric&#39;s timeAndMoney library. To make a time interval in the usual way we might see something like this:</p>

<p>ä¸€ç•ªç°¡å˜ãªä¾‹ã¯ã€Ericã®[[timeAndMoney|<a href="http://timeandmoney.sourceforge.net/%5D%5D%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%81">http://timeandmoney.sourceforge.net/]]ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã</a> ã‚ã†ã€‚
æ™‚é–“ã®é–“éš”ã‚’ä½œã‚‹ã«ã¯ã€é€šå¸¸ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã™ã‚‹ã€‚</p>

<p>TimePoint fiveOClock, sixOClock;
 ...
 TimeInterval meetingTime = new TimeInterval(fiveOClock, sixOClock);</p>

<p>//The timeAndMoney library user would do it this way:</p>

<p>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®åˆ©ç”¨è€…ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã“ã¨ã‚’è¡Œã†ã ã‚ã†ã€‚</p>

<p>TimeInterval meetingTime = fiveOClock.until(sixOClock);</p>

<p>//I&#39;ll continue with the common example of making out an order for a customer. The order has line-items, with quantities and products. A line item can be skippable, meaning I&#39;d prefer to deliver without this line item rather than delay the whole order. I can give the whole order a rush status.</p>

<p>ç¶šã„ã¦ã€ã“ã‚Œã¾ãŸã‚ã‚Šãµã‚ŒãŸä¾‹ã ãŒã€é¡§å®¢ã‹ã‚‰ã®æ³¨æ–‡ã‚’ä¾‹ã«æŒ™ã’ã‚ˆã†ã€‚
æ³¨æ–‡ã«ã¯ã€å•†å“ã¨ãã®æ•°é‡ã‚’è¨˜è¼‰ã—ãŸæ³¨æ–‡æ˜ç´°ãŒå«ã¾ã‚Œã‚‹ã€‚
æ³¨æ–‡æ˜ç´°ã¯ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ï¼ˆskippableï¼‰ã€‚
ãŸã¨ãˆã°ã€æ³¨æ–‡å…¨ä½“ã®é…é€ãŒé…ã‚Œã‚‹ã‚ˆã‚Šã¯ã€
ã‚ã‚‹å•†å“ã‚’é™¤ã„ã¦æ®‹ã‚Šã‚’é…é€ã—ãŸã»ã†ãŒã‚ˆã„å ´åˆãŒè€ƒãˆã‚‰ã‚Œã‚‹ã‹ã‚‰ã ã€‚
æ³¨æ–‡ã®çŠ¶æ…‹ã‚’ã€Œè‡³æ€¥ï¼ˆrushï¼‰ã€ã«ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã€‚</p>

<p>//The most common way I see this kind of thing built up is like this:</p>

<p>ã“ã®ã‚ˆã†ãªå ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã™ã‚‹ã“ã¨ãŒå¤šã„ã€‚</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">private void makeNormal(Customer customer) {
    Order o1 = new Order();
    customer.addOrder(o1);
    OrderLine line1 = new OrderLine(6, Product.find(&quot;TAL&quot;));
    o1.addLine(line1);
    OrderLine line2 = new OrderLine(5, Product.find(&quot;HPK&quot;));
    o1.addLine(line2);
    OrderLine line3 = new OrderLine(3, Product.find(&quot;LGV&quot;));
    o1.addLine(line3);
    line2.setSkippable(true);
    o1.setRush(true);
}
</code></pre></div>
<p>//In essence we create the various objects and wire them up together. If we can&#39;t set up everything in the constructor, then we need to make temporary variables to help us complete the wiring - this is particularly the case where you&#39;re adding items into collections.</p>

<p>ã“ã“ã§ã¯ã€æ§˜ã€…ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã£ã¦ã‹ã‚‰ã€ãã‚Œã‚‰ã‚’ã¤ãªãåˆã‚ã›ã¦ã„ã‚‹ã€‚
ã™ã¹ã¦ã®è¨­å®šã‚’ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§è¡Œã†ã“ã¨ã¯ã§ããªã„ã®ã§ã€ä¸€æ™‚çš„ã«å¤‰æ•°ã‚’ä½œã£ã¦ã€å¾Œã‹ã‚‰ã¤ãªãåˆã‚ã›ã‚‹ã‚ˆã†ãªã“ã¨ã‚’ã—ã¦ã„ã‚‹â€”â€”ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚¢ã‚¤ãƒ†ãƒ ã‚’è¿½åŠ ã™ã‚‹ã®ã¯ã“ã®ã‚ˆã†ãªæ™‚ã ã€‚</p>

<p>//Here&#39;s the same assembly done in a fluent style:</p>

<p>ä»¥ä¸‹ã¯ä¸Šè¨˜ã¨åŒã˜ã¤ãªãåˆã‚ã›ã‚’ã€æµã‚Œã‚‹ã‚ˆã†ãªã‚¹ã‚¿ã‚¤ãƒ«ã§è¡Œã£ã¦ã„ã‚‹ã€‚</p>

<p>private void makeFluent(Customer customer) {
        customer.newOrder()
                .with(6, &quot;TAL&quot;)
                .with(5, &quot;HPK&quot;).skippable()
                .with(3, &quot;LGV&quot;)
                .priorityRush();
    }</p>

<p>//Probably the most important thing to notice about this style is that the intent is to do something along the lines of an internal DomainSpecificLanguage. Indeed this is why we chose the term &#39;fluent&#39; to describe it, in many ways the two terms are synonyms. The API is primarily designed to be readable and to flow. The price of this fluency is more effort, both in thinking and in the API construction itself. The simple API of constructor, setter, and addition methods is much easier to write. Coming up with a nice fluent API requires a good bit of thought.</p>

<p>ã“ã®ã‚¹ã‚¿ã‚¤ãƒ«ã§æ°—ã¥ãã¹ãé‡è¦ãªç‚¹ã¯ã€ã€Œå†…éƒ¨[[DomainSpecificLanguage]]ã€ã®ã‚ˆã†ãªã“ã¨ã‚’å®Ÿç¾ã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹ã¨ã“ã‚ã ã€‚ã“ã‚ŒãŒæˆ‘ã€…ãŒã€Œæµã‚Œã‚‹ã‚ˆã†ãªã€ã¨è¡¨ç¾ã—ãŸç†ç”±ã ã€‚
ã“ã®2ã¤ã®ç”¨èªã¯ã€æ§˜ã€…ãªç‚¹ã§åŒæ„èªã¨è¦‹ãªã™ã“ã¨ãŒã§ãã‚‹ã€‚
ã“ã®APIã¯èª­ã¿ã‚„ã™ã•ã‚’ç¬¬ä¸€ã«è¨­è¨ˆã•ã‚Œã¦ã„ã‚‹ã€‚
æµã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã«ã¯ã€è¨­è¨ˆã¨APIã®æ§‹ç¯‰ã«æ™‚é–“ãŒã‹ã‹ã‚‹ã¨ã„ã†ä»£å„Ÿã‚’ã¨ã‚‚ãªã†ã€‚
ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã€ã‚»ãƒƒã‚¿ãƒ¼ã€addXXXãƒ¡ã‚½ãƒƒãƒ‰ã¨ã„ã£ãŸã‚·ãƒ³ãƒ—ãƒ«ãªAPIã¯ç°¡å˜ã«æ›¸ãã“ã¨ãŒã§ãã‚‹ãŒã€ãƒŠã‚¤ã‚¹ã§æµã‚Œã‚‹ã‚ˆã†ãªAPIã«ãŸã©ã‚Šç€ãã«ã¯ã€ãã‚Œãªã‚Šã®é•·è€ƒãŒå¿…è¦ã ã€‚</p>

<p>//Indeed one of the problems of this little example is that I just knocked it up in a Calgary coffee shop over breakfast. Good fluent APIs take a while to build. If you want a much more thought out example of a fluent API take a look at JMock. JMock, like any mocking library, needs to create complex specifications of behavior. There have been many mocking libraries built over the last few years, JMock&#39;s contains a very nice fluent API which flows very nicely. Here&#39;s an example expectation:</p>

<p>å…ˆã»ã©ã®ä¾‹ã¯ã‚«ãƒ«ã‚¬ãƒªãƒ¼ã®ã‚³ãƒ¼ãƒ’ãƒ¼ã‚·ãƒ§ãƒƒãƒ—ã§æœé£Ÿã‚’ã¨ã£ã¦ã„ã‚‹ã¨ãã«ã€ç§ãŒãƒãƒ£ãƒãƒ£ã£ã¨æ›¸ãä¸Šã’ãŸã‚‚ã®ãªã®ã§ã¡ã‚‡ã£ã¨é•ã†ã®ã ãŒã€æœ¬æ¥ã€æµã‚Œã‚‹ã‚ˆã†ãªAPIã®æ§‹ç¯‰ã«ã¯æ™‚é–“ãŒã‹ã‹ã‚‹ã€‚
æµã‚Œã‚‹ã‚ˆã†ãªAPIã«ã¤ã„ã¦ã‚‚ã£ã¨è€ƒãˆã¦ã¿ãŸã„ã®ã§ã‚ã‚Œã°ã€[[JMock|<a href="http://www.jmock.org/%5D%5D%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E8%A6%8B%E3%81%A6%E3%81%BF%E3%82%8B%E3%81%A8%E3%81%84%E3%81%84%E3%81">http://www.jmock.org/]]ã®ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã¿ã‚‹ã¨ã„ã„ã</a> ã‚ã†ã€‚
JMockãªã©ã®ãƒ¢ãƒƒã‚¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã€æŒ¯èˆã®è¤‡é›‘ãªã‚¹ãƒšãƒƒã‚¯ï¼ˆä»•æ§˜ï¼‰ã‚’ä½œã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚
ã“ã“æ•°å¹´ã§æ§˜ã€…ãªãƒ¢ãƒƒã‚¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒä½œã‚‰ã‚Œã¦ããŸãŒã€JMockã«ã¯éå¸¸ã«ãƒŠã‚¤ã‚¹ã§æµã‚Œã‚‹ã‚ˆã†ãªAPIãŒå«ã¾ã‚Œã¦ãŠã‚Šã€ãã‚ŒãŒæ­£ã«æµã‚Œã‚‹ãŒå¦‚ããªã®ã§ã‚ã‚‹ã€‚
ä»¥ä¸‹ã«ã‚¨ã‚¯ã‚¹ãƒšã‚¯ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæœŸå¾…ï¼‰ã®ä¾‹ã‚’æŒ™ã’ã‚‹ã€‚</p>

<p>mock.expects(once()).method(&quot;m&quot;).with( or(stringContains(&quot;hello&quot;),
                                           stringContains(&quot;howdy&quot;)) );</p>

<p>//I saw Steve Freeman and Nat Price give an excellent talk at JAOO2005 on the evolution of the JMock API, they since wrote it up in an OOPSLA paper.</p>

<p>ç§ã¯[[JAOO2005|<a href="http://martinfowler.com/bliki/JAOO2005.html%5D%5D%E3%81%A7%E3%80%81%5B%5BSteve">http://martinfowler.com/bliki/JAOO2005.html]]ã§ã€[[Steve</a> Freeman|<a href="http://stevef.truemesh.com/%5D%5D%E3%81%A8%5B%5BNat">http://stevef.truemesh.com/]]ã¨[[Nat</a> Price|<a href="http://nat.truemesh.com/%5D%5D%E3%81%8CJMock">http://nat.truemesh.com/]]ãŒJMock</a> APIã®é€²åŒ–ã«ã¤ã„ã¦ã®ç´ æ™´ã‚‰ã—ã„è¬›æ¼”ã‚’æ‹è´ã—ãŸãŒã€å½¼ã‚‰ã¯ãã‚Œã‚’[[OOPSLAã®è«–æ–‡(PDF)|<a href="http://www.mockobjects.com/files/evolving_an_edsl.ooplsa2006.pdf%5D%5D%E3%81%A8%E3%81%97%E3%81%A6%E3%81%BE%E3%81%A8%E3%82%81%E3%81%A6%E3%81%84%E3%82%8B%E3%80%82">http://www.mockobjects.com/files/evolving_an_edsl.ooplsa2006.pdf]]ã¨ã—ã¦ã¾ã¨ã‚ã¦ã„ã‚‹ã€‚</a></p>

<p>//So far we&#39;ve mostly seen fluent APIs to create configurations of objects, often involving value objects. I&#39;m not sure if this is a defining characteristic, although I suspect there is something about them appearing in a declarative context. The key test of fluency, for us, is the Domain Specific Language quality. The more the use of the API has that language like flow, the more fluent it is.</p>

<p>ã“ã‚Œã¾ã§æˆ‘ã€…ãŒæµã‚Œã‚‹ã‚ˆã†ãªAPIã‚’ç›®ã«ã—ãŸã®ã¯ã€
ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆç‰¹ã«ãƒãƒªãƒ¥ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰ã‚’çµ„ã¿ç«‹ã¦ã‚‹ã¨ãã ã£ãŸã€‚
å®£è¨€çš„æ–‡è„ˆã®ãªã‹ã§ä½•ã‹ç¾ã‚Œã‚‹ã‚‚ã®ãŒã‚ã‚‹ã®ã§ã¯ãªã„ã¨æ€ã†ã®ã ãŒã€
ã“ã‚ŒãŒç‰¹æ€§ã‚’å®šç¾©ã¥ã‘ã‚‹ã‚‚ã®ã‹ã©ã†ã‹ã¯åˆ†ã‹ã‚‰ãªã„ã€‚
æˆ‘ã€…ã«ã¨ã£ã¦ã€æµã‚Œã‚’è¡¨ã™è©¦é‡‘çŸ³ã¨ã¯ã€DomainSpecificLanguageã®ç‰¹æ€§ã‚’æŒã£ã¦ã„ã‚‹ã‹ã©ã†ã‹ã ã€‚
DomainSpecificLanguageã®ã‚ˆã†ãªAPIã‚’ä½¿ã£ã¦ã„ã‚‹ã¨ã€ã ã‚“ã ã‚“ã¨æµã‚Œã¦ã„ãã®ã§ã‚ã‚‹ã€‚</p>

<p>//Building a fluent API like this leads to some unusual API habits. One of the most obvious ones are setters that return a value. (In the order example with adds an order line to the order and returns the order.) The common convention in the curly brace world is that modifier methods are void, which I like because it follows the principle of CommandQuerySeparation. This convention does get in the way of a fluent interface, so I&#39;m inclined to suspend the convention for this case.</p>

<p>ã“ã®ã‚ˆã†ã«æµã‚Œã‚‹ã‚ˆã†ãªAPIã‚’æ§‹ç¯‰ã™ã‚‹ã¨ã€ä¸€é¢¨å¤‰ã‚ã£ãŸAPIã«ãªã‚‹ã€‚
æœ€ã‚‚åˆ†ã‹ã‚Šã‚„ã™ã„ã®ã¯ã€ã‚»ãƒƒã‚¿ãƒ¼ãŒå€¤ã‚’è¿”ã™ã‚ˆã†ã«ãªã‚‹ã“ã¨ã ã‚ã†ã€‚
ï¼ˆå…ˆã»ã©ã®æ³¨æ–‡ã®ä¾‹ã ã¨ã€æ³¨æ–‡ã«æ³¨æ–‡æ˜ç´°ã‚’è¿½åŠ ã™ã‚‹ã¨æ³¨æ–‡ãŒè¿”ã£ã¦ãã‚‹ã€‚ï¼‰
ä¸­æ‹¬å¼§è¨€èªã®ä¸–ç•Œã§ã¯ã€ä½•ã‹ã‚’å¤‰æ›´ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã«ã¯ã‚’ä»˜ã‘ã‚‹ã®ãŒä¸€èˆ¬çš„ã ã€‚ã“ã‚Œã¯[[CommandQuerySeparation]]ã®åŸå‰‡ã«å‰‡ã—ã¦ã„ã‚‹ã®ã§ç§ã¯å¥½ããªã®ã ãŒã€
ã“ã®æ…£ç¿’ãŒæµã‚Œã‚‹ã‚ˆã†ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§ã¯é‚ªé­”ãªã®ã ã€‚
ã“ã®å ´åˆã¯ã€æ…£ç¿’ã‚’ä¸€æ™‚çš„ã«åœæ­¢ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã€‚</p>

<p>//You should choose your return type based on what you need to continue fluent action. JMock makes a big point of moving its types depending on what&#39;s likely to be needed next. One of the nice benefits of this style is that method completion (intellisense) helps tell you what to type next - rather like a wizard in the IDE. In general I find dynamic languages work better for DSLs since they tend to have a less cluttered syntax. Using method completion, however, is a plus for static languages.</p>

<p>è¿”ã‚Šå€¤ã®å‹ã¯ã€æµã‚Œã‚‹ã‚ˆã†ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¶šã‘ã‚‹ãŸã‚ã«å¿…è¦ãªã‚‚ã®ã‚’é¸æŠã™ã¹ãã§ã‚ã‚‹ã€‚
JMockã¯æ¬¡ã«å¿…è¦ã«ãªã‚Šãã†ãªã‚‚ã®ã«å¿œã˜ã¦å‹ã‚’å¤‰ãˆã‚‹ã¨å¼·èª¿ã—ã¦ã„ã‚‹ã€‚
ã“ã®ã‚¹ã‚¿ã‚¤ãƒ«ã§ãƒŠã‚¤ã‚¹ãªã®ã¯ã€IDEã®ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ã§ã¯ãªãã€ãƒ¡ã‚½ãƒƒãƒ‰è£œå®Œï¼ˆã‚¤ãƒ³ãƒ†ãƒªã‚»ãƒ³ã‚¹ï¼‰ã«ã‚ˆã£ã¦æ¬¡ã«å¿…è¦ãªå‹ãŒåˆ†ã‹ã‚‹ã¨ã„ã†ã“ã¨ã ã€‚
DSLã«ã¯æ–‡æ³•ãŒæ¯”è¼ƒçš„æ•´ã£ãŸå‹•çš„å‹è¨€èªãŒå‘ã„ã¦ã„ã‚‹ã¨æ€ã†ãŒã€
ãƒ¡ã‚½ãƒƒãƒ‰è£œå®Œã‚’ä½¿ãˆã°ã€é™çš„å‹è¨€èªã«ã‚‚ãƒ—ãƒ©ã‚¹ã«ãªã‚‹ã ã‚ã†ã€‚</p>

<p>//One of the problems of methods in a fluent interface is that they don&#39;t make much sense on their own. Looking at a method browser of method by method documentation doesn&#39;t show much sense to with. Indeed sitting there on its own I&#39;d argue that it&#39;s a badly named method that doesn&#39;t communicate its intent at all well. It&#39;s only in the context of the fluent action that it shows its strengths. One way around this may be to use builder objects that are only used in this context.</p>

<p>æµã‚Œã‚‹ã‚ˆã†ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§ä½œã‚‰ã‚ŒãŸãƒ¡ã‚½ãƒƒãƒ‰ã®å•é¡Œç‚¹ã¯ã€åˆ†ã‹ã‚Šã«ãã„ã¨ã„ã†ç‚¹ã ã€‚
ãƒ¡ã‚½ãƒƒãƒ‰åˆ¥ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ãƒ¡ã‚½ãƒƒãƒ‰ãƒ–ãƒ©ã‚¦ã‚¶ã§è¦‹ã¦ã‚‚ã€with ã®æ„å‘³ã¯ã‚ˆãåˆ†ã‹ã‚‰ãªã„ã€‚
ãã‚Œã ã‘ã‚’å–ã‚Šå‡ºã›ã°ã€ãƒ¡ã‚½ãƒƒãƒ‰ã®æ„å›³ã‚’å…¨ãä¼ãˆãªã„æ‚ªã„åå‰ãŒä»˜ã‘ã‚‰ã‚Œã¦ã„ã‚‹ã¨è¨€ã†ã“ã¨ã‚‚ã§ãã‚‹ã€‚
ãã®å¼·ã¿ã¯æµã‚Œã‚‹ã‚ˆã†ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®æ–‡è„ˆã§ã—ã‹ç¾ã‚Œãªã„ã€‚
ã“ã®å•é¡Œã‚’é¿ã‘ã‚‹ã«ã¯ã€ã“ã®ã‚ˆã†ãªæ–‡è„ˆã§ã®ã¿ä½¿ã‚ã‚Œã‚‹ãƒ“ãƒ«ãƒ€ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ã†ã¨ã„ã†æ‰‹ãŒã‚ã‚‹ã ã‚ã†ã€‚</p>

<p>//One thing that Eric mentioned was that so far he&#39;s used, and seen, fluent interfaces mostly around configurations of value objects. Value objects don&#39;t have domain-meaningful identity so you can make them and throw them away easily. So the fluency rides on making new values out of old values. In that sense the order example isn&#39;t that typical since it&#39;s an entity in the EvansClassification.</p>

<p>EricãŒè¿°ã¹ã¦ã„ãŸã“ã¨ã ãŒã€å½¼ãŒæµã‚Œã‚‹ã‚ˆã†ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ã“ã‚Œã¾ã§ã«ä½¿ã£ãŸã‚Šç›®ã«ã—ãŸã‚Šã—ã¦ããŸã®ã¯ã€ãƒãƒªãƒ¥ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®çµ„ã¿ç«‹ã¦ã ã£ãŸãã†ã ã€‚
ãƒãƒªãƒ¥ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ãƒ‰ãƒ¡ã‚¤ãƒ³ã«ä¾å­˜ã—ãŸã‚‚ã®ã§ã¯ãªã„ã®ã§ã€
ç°¡å˜ã«ä½œã£ãŸã‚Šæ¨ã¦ãŸã‚Šã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
å¤ã„ãƒãƒªãƒ¥ãƒ¼ã‹ã‚‰æ–°ã—ã„ãƒãƒªãƒ¥ãƒ¼ã‚’ä½œã‚‹ã¨ãã«æµã‚ŒãŒæ¼‚ã†ã®ã ã€‚
ãã®æ„å‘³ã§ã€æ³¨æ–‡ã®ä¾‹ã¯å…¸å‹çš„ãªã‚‚ã®ã§ã¯ãªã‹ã£ãŸã€‚
[[EvansClassification]]ã§ã¯ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¨åˆ†é¡ã•ã‚Œã¦ã„ã¦ã„ã‚‹ã‚‚ã®ã ã‹ã‚‰ã ã€‚</p>

<p>//I haven&#39;t seen a lot of fluent interfaces out there yet, so I conclude that we don&#39;t know much about their strengths and weaknesses. So any exhortations to use them can only be preliminary - however I do think they are ripe for more experimentation.</p>

<p>ç§ã¯ã¾ã ãã‚Œã»ã©å¤šãã®æµã‚Œã‚‹ã‚ˆã†ãªã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã‚’è¦‹ãŸã“ã¨ãŒãªã„ã®ã§ã€
ãƒ¡ãƒªãƒƒãƒˆã€ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã«ã¤ã„ã¦çµè«–ã¥ã‘ã‚‹ã¾ã§ã«ã¯è‡³ã‚‰ãªã„ã€‚
ã“ã“ã§å‹§ã‚ã¦ã„ã‚‹ã®ã‚‚ã€ã»ã‚“ã®è§¦ã‚Šã«éããªã„â€”â€”ãŸã ã€ã‚‚ã£ã¨è©¦ã•ã‚Œã‚‹ã¹ãæ™‚æœŸã§ã‚ã‚‹ã¨ã¯è€ƒãˆã¦ã„ã‚‹ã€‚</p>

<p>//There&#39;s a good follow up to this from Piers Cawley.</p>

<p>[[Piers Cawley|<a href="http://www.bofh.org.uk/articles/2005/12/21/fluent-interfaces%5D%5D%E3%81%8B%E3%82%89%E3%80%81%E3%81%84%E3%81%84%E3%83%95%E3%82%A9%E3%83%AD%E3%83%BC%E3%81%8C%E5">http://www.bofh.org.uk/articles/2005/12/21/fluent-interfaces]]ã‹ã‚‰ã€ã„ã„ãƒ•ã‚©ãƒ­ãƒ¼ãŒå</a>…¥ã£ãŸã€‚</p>

<p>!SEE ALSO</p>

<p><em>ã²ãŒã‚„ã™ã‚’ blog
*</em> [[æµã‚Œã‚‹ã‚ˆã†ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨è„±CoC|<a href="http://d.hatena.ne.jp/higayasuo/20071018#1192681950%5D">http://d.hatena.ne.jp/higayasuo/20071018#1192681950]</a>]
** [[æµã‚Œã‚‹ã‚ˆã†ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹|<a href="http://d.hatena.ne.jp/higayasuo/20071019#1192757543%5D">http://d.hatena.ne.jp/higayasuo/20071019#1192757543]</a>]</p>

  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Martin Fowler's Bliki (ja)</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>Martin Fowler's Bliki (ja)</li>
          <li><a href="mailto:kdmsnr AT gmail.com">kdmsnr AT gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/bliki-ja">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">bliki-ja</span>
            </a>
          </li>
          

          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text"></p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
