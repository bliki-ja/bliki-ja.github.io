<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>ãƒšãƒ³ãƒ‡ã‚£ãƒ³ã‚°HEAD</title>
  <meta name="description" content="2007/4/26">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://bliki-ja.github.io/PendingHead">
  <link rel="alternate" type="application/rss+xml" title="Martin Fowler's Bliki (ja)" href="http://bliki-ja.github.io/feed.xml" />
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Martin Fowler's Bliki (ja)</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">ãƒšãƒ³ãƒ‡ã‚£ãƒ³ã‚°HEAD</h1>
    <p class="post-meta">Apr 26, 2007</p>
  </header>

  <article class="post-content">
    <p>2007/4/26</p>

<p>//I&#39;m a big fan of Continuous Integration, it&#39;s an relatively simple practice that can make a huge difference to most development teams. However like most practices it has its flaws^H^H^H^H^H opportunities for improvement. Paul Duvall, author of the soon-to-be-standard book on the subject, pointed out one of these recently. If the commit build breaks, the whole team is affected and potentially slowed until it&#39;s fixed.</p>

<p>è«¸å›ã€ç§ã¯[[ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³|<a href="http://www.objectclub.jp/community/XP-jp/xp_relate/cont-j%5D%5D%E3%81%8C%E5%A4%A7%E5%A5%BD%E3%81%8D%E3%81">http://www.objectclub.jp/community/XP-jp/xp_relate/cont-j]]ãŒå¤§å¥½ãã</a> ã€‚
ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ãŒé–‹ç™ºãƒãƒ¼ãƒ ã«ç”šå¤§ãªå½±éŸ¿ã‚’ä¸ãˆã‚‹ã®ãŒå¥½ãã ã€‚
ã ãŒã‚ã‚‰ã‚†ã‚‹ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ãŒãã†ã§ã‚ã‚‹ã‚ˆã†ã«ã€æ¬ é™¥^H^H^H^Hã‚«ã‚¤ã‚¼ãƒ³ã®ä½™åœ°ãŒã‚ã‚‹ã€‚
[[Paul Duvall|<a href="http://www.testearly.com/category/duvall/%5D%5D%EF%BC%88%E3%81%AE%E8%91%97%E8%80">http://www.testearly.com/category/duvall/]]ï¼ˆã®è‘—è€</a>…ï¼‰ãŒã“ã®ç‚¹ã«ã¤ã„ã¦[[æŒ‡æ‘˜|<a href="http://www.testearly.com/2007/04/25/the-future-of-continuous-integration/%5D%5D%E3%81%97%E3%81%A6%E3%81%84%E3%81%9F%E3%80%82">http://www.testearly.com/2007/04/25/the-future-of-continuous-integration/]]ã—ã¦ã„ãŸã€‚</a>
ã‚³ãƒŸãƒƒãƒˆãƒ“ãƒ«ãƒ‰ãŒå¤±æ•—ã™ã‚‹ã¨ã€ãƒãƒ¼ãƒ å…¨ä½“ã«å½±éŸ¿ã—ã€ãã‚ŒãŒä¿®æ­£ã•ã‚Œã‚‹ã¾ã§ã‚¹ãƒ”ãƒ¼ãƒ‰ãŒè½ã¡ã¦ã—ã¾ã†ã€‚</p>

<p>//When we first started doing Continuous Integration at ThoughtWorks, this one of the of the things that worried me about the way we were doing it. It worried me because there was an important difference between between the ThoughtWorks 2000 style and the style we&#39;d used at C3.</p>

<p>ThoughtWorksã§ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å§‹ã‚ãŸé ƒã€
ãã®ã‚„ã‚Šæ–¹ã«ã¤ã„ã¦å¿ƒé…ã—ã¦ã„ãŸã“ã¨ãŒã‚ã£ãŸã€‚
ThoughtWorks 2000ã®ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆè¨³æ³¨ï¼š2000å¹´é ƒã®ã‚„ã‚Šæ–¹ï¼‰ã¨
[[C3]]ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ã£ã¦ã„ãŸã‚¹ã‚¿ã‚¤ãƒ«ãŒé•ã£ã¦ã„ãŸã‹ã‚‰ã ã€‚</p>

<p>//The ThoughtWorks 2000 style is pretty much the canonical style of CI used today. Once you are happy with your work you commit it to the repository, and then build it on the build machine (either manually for with a CI server like CruiseControl). The problem lies if your commit is bad, anyone who updates will get failing code until you fix it.</p>

<p>ThoughtWorks 2000ã‚¹ã‚¿ã‚¤ãƒ«ã¯ã€ä»Šæ—¥ä½¿ã‚ã‚Œã¦ã„ã‚‹ã‚ˆã†ãªé€šå¸¸ã®ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã§ã‚ã‚‹ã€‚
æˆæœã«æº€è¶³ã—ãŸã‚‰ãƒ¬ãƒã‚¸ãƒˆãƒªã«ã‚³ãƒŸãƒƒãƒˆã—ã€ãƒ“ãƒ«ãƒ‰ãƒã‚·ãƒ¼ãƒ³ã§ãƒ“ãƒ«ãƒ‰ã™ã‚‹ï¼ˆã‚ã‚‹ã„ã¯ã€CruseControlãªã©ã®CIã‚µãƒ¼ãƒã§æ‰‹å‹•ã§ãƒ“ãƒ«ãƒ‰ã™ã‚‹ï¼‰ã€‚
å•é¡Œã¯ã€èª¤ã£ãŸã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒŸãƒƒãƒˆã—ã¦ã—ã¾ã„ã€
ãã‚ŒãŒä¿®æ­£ã•ã‚Œã‚‹ã¾ã§ã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹ã¨æ¬ é™¥ã‚³ãƒ¼ãƒ‰ãŒå‡ºã¦ãã‚‹ã¨ã„ã†ã“ã¨ã ã€‚</p>

<p>//In the C3 way of doing it we didn&#39;t commit to the head of repository directly. C3 was a Smalltalk project and used Envy, a Smalltalk-oriented repository system. Envy had some different concepts to mainstream repositories. Since it&#39;s ages since I used it my memory on exactly how it worked has gone all fuzzy, but the basic idea was that when you were working on your feature you committed to editions. An edition was like a private branch, visible to everyone but not blessed. Only when you had a successful build on the build machine would you upgrade your edition into a release, which was the equivalent to the mainline. This way you never got broken code into the mainline of the project.</p>

<p>C3æµã§ã¯ãƒ¬ãƒã‚¸ãƒˆãƒªã®HEADã«ç›´æ¥ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã€‚
C3ã¯Smalltalkã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã€Envyï¼ˆSmalltalkæŒ‡å‘ãƒ¬ãƒã‚¸ãƒˆãƒªã‚·ã‚¹ãƒ†ãƒ ï¼‰ã‚’ä½¿ã£ã¦ã„ãŸã€‚
Envyã¯ä¸»æµã®ãƒ¬ãƒã‚¸ãƒˆãƒªã¨ã¯å°‘ã—ã‚³ãƒ³ã‚»ãƒ—ãƒˆãŒç•°ãªã£ã¦ã„ã‚‹ã€‚
ãšã„ã¶ã‚“æ˜”ã®ã“ã¨ãªã®ã§ã€ã©ã†ã„ã†å‹•ãã‚’ã—ã¦ã„ãŸã‹è¨˜æ†¶ãŒå®šã‹ã§ã¯ãªã„ãŒã€
åŸºæœ¬çš„ã«ã€ä½œæ¥­ä¸­ã¯ã€Œã‚¨ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã€ã«ã‚³ãƒŸãƒƒãƒˆã™ã‚‹ã“ã¨ã«ãªã‚‹ã€‚
ã“ã‚Œã¯ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãªãƒ–ãƒ©ãƒ³ãƒã®ã‚ˆã†ãªã‚‚ã®ã ã€‚
ã¿ã‚“ãªã«è¦‹ãˆã‚‹ãŒã€å¹²æ¸‰ã¯ã•ã‚Œãªã„ã€‚
ãƒ“ãƒ«ãƒ‰ãƒã‚·ãƒ³ã§ãƒ“ãƒ«ãƒ‰ã«æˆåŠŸã—ãŸã¨ãã ã‘ã€
ã‚¨ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã‚’ã€Œãƒªãƒªãƒ¼ã‚¹ã€ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹ã€‚
ã“ã‚Œã¯ãƒ–ãƒ©ãƒ³ãƒã§ã¯ãªããƒ¡ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã«ç›¸å½“ã™ã‚‹ã€‚
ã“ã®æ–¹æ³•ã ã¨ã€å£Šã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ¡ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã«å…¥ã‚Œã¦ã—ã¾ã†ã“ã¨ã¯æ±ºã—ã¦ãªã„ã€‚</p>

<p>//Envy made it easy to work this way, the version control systems we mostly use now make it more tricky. Ideally you want to create a working copy that updates from the true head (to keep you in sync) but commits to a different pending-head branch. Only a successful integration build can actually commit to the true project head. A continuous integration server would check out from the pending head and, if successful, commit to the true head.</p>

<p>Envyã ã¨ã“ã®ã‚ˆã†ãªä½¿ã„æ–¹ãŒç°¡å˜ã«ã§ãã‚‹ã€‚
ä»Šæ—¥ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã¯ã€å°‘ã—ãƒˆãƒªãƒƒã‚­ãƒ¼ã«ãªã‚‰ã–ã‚‹ã‚’å¾—ãªã„ã€‚
ç†æƒ³ã‚’è¨€ãˆã°ã€ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ã‚³ãƒ”ãƒ¼ã‚’ä½œã£ã¦ã€
ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã¯HEADã‹ã‚‰è¡Œã£ã¦åŒæœŸã™ã‚‹ã‚ˆã†ã«ã—ã¦ãŠãã€
ã‚³ãƒŸãƒƒãƒˆã¯åˆ¥ã®HEADï¼ˆãƒšãƒ³ãƒ‡ã‚£ãƒ³ã‚°HEADï¼‰ã«ã‚³ãƒŸãƒƒãƒˆã™ã‚‹ã€‚
ãã—ã¦ã€ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰ã«æˆåŠŸã—ãŸã¨ãã ã‘çœŸã®HEADã«ã‚³ãƒŸãƒƒãƒˆã™ã‚‹ã€‚
ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒã¯
ãƒšãƒ³ãƒ‡ã‚£ãƒ³ã‚°HEADã‹ã‚‰ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã—ã¦ã€
ãƒ“ãƒ«ãƒ‰ã«æˆåŠŸã—ãŸã‚‰ã€çœŸã®HEADã«ã‚³ãƒŸãƒƒãƒˆã™ã‚‹ã€‚</p>

<p>//How difficult is it to set something like this up yourself? I&#39;m not sure, I haven&#39;t chatted with a team that&#39;s done it2. However a number of team oriented tools are providing this kind of capability. For example JetBrains&#39;s TeamCity does it under the name &quot;delayed commit&quot;. Paul also mentions Borland&#39;s Gauntlet.</p>

<p>ã“ã†ã„ã£ãŸã‚‚ã®ã‚’è‡ªåˆ†ã§ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹ã®ã¯é›£ã—ã„ã®ã ã‚ã†ã‹ï¼Ÿ
ã™ã§ã«ã‚„ã£ãŸã“ã¨ã®ã‚ã‚‹ãƒãƒ¼ãƒ ãŒã„ã‚‹ãŒã€ã¾ã è©±ã—ã¦ã„ãªã„ã®ã§ã‚ˆãåˆ†ã‹ã‚‰ãªã„ã€‚
ã ãŒã€ã„ãã¤ã‹ã®ãƒãƒ¼ãƒ æŒ‡å‘ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ã€åŒç­‰ã®ã“ã¨ãŒã§ãã‚‹ã€‚
ãŸã¨ãˆã°ã€JetBrainã®[[TeamCity|<a href="http://www.jetbrains.com/teamcity/%5D%5D%E3%81%A7%E3%81%AF%E3%80%8C%E9%81">http://www.jetbrains.com/teamcity/]]ã§ã¯ã€Œé</a>…å»¶ã‚³ãƒŸãƒƒãƒˆã€ã¨å‘¼ã°ã‚Œã¦ã„ã‚‹ã€‚
ã¾ãŸã€PaulãŒBorlandã®Gauntletã«ã¤ã„ã¦è¨€åŠã—ã¦ã„ã‚‹ã€‚</p>

<p>//The other question is how much it matters. Despite my worries we didn&#39;t get enough pain from broken builds to want to install a pending head in 2000. If you get a lot of broken integration builds there are other ways to fix it. Often the main problem is that people aren&#39;t doing a private build before they commit. As usual the people-issue is often a more important issue to deal with before introducing more complicated technology.</p>

<p>ä»–ã«ã‚‚ã€ã“ã‚ŒãŒã©ã‚Œã ã‘é‡è¦ãªã®ã‹ã¨ã„ã†ç–‘å•ã‚‚ã‚ã‚‹ã€‚
2000å¹´ã«ãŠã‘ã‚‹ç§ã®å¿ƒé…ã¯ææ†‚ã§ã€æˆ‘ã€…ã¯ãƒ“ãƒ«ãƒ‰ãŒå¤±æ•—ã—ã¦ã‚‚ãƒšãƒ³ãƒ‡ã‚£ãƒ³ã‚°HEADã‚’æ¡ç”¨ã»ã©ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’å—ã‘ã‚‹ã“ã¨ã¯ãªã‹ã£ãŸã€‚
ãƒ“ãƒ«ãƒ‰ãŒå¤±æ•—ã—ã¦ã‚‚ã€ãã‚Œã‚’ç›´ã™æ–¹æ³•ã¯ä»–ã«ã‚‚ã‚ã‚‹ã€‚
å•é¡Œãªã®ã¯ã€ã‚³ãƒŸãƒƒãƒˆã™ã‚‹å‰ã«è‡ªåˆ†ã®ã¨ã“ã‚ã§ãƒ“ãƒ«ãƒ‰ã—ãªã„ã“ã¨ã ã€‚
æ¯åº¦ã®ã“ã¨ã ãŒã€è¤‡é›‘ãªæŠ€è¡“ã‚’å°å…¥ã™ã‚‹å‰ã«è€ƒãˆãªã‘ã‚Œã°ã„ã‘ãªã„ã®ã¯ã€
äººã®å•é¡Œãªã®ã§ã‚ã‚‹ã€‚</p>

  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Martin Fowler's Bliki (ja)</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>Martin Fowler's Bliki (ja)</li>
          <li><a href="mailto:kdmsnr AT gmail.com">kdmsnr AT gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/bliki-ja">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">bliki-ja</span>
            </a>
          </li>
          

          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text"></p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
